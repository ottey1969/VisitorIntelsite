{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section bg-gradient-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center min-vh-50">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    How Public AI-to-AI Conversations Drive <span class="text-warning">Business Promotion</span> and <span class="text-warning">Search Engine Visibility</span>
                </h1>
                <p class="lead mb-4">
                    Discover how <strong>Public AI-to-AI Conversations</strong> create indexed, SEO-optimized content that drives <strong>Business Promotion</strong> and enhances <strong>Search Engine Visibility</strong> across Google AI, ChatGPT, Perplexity & Anthropic with <strong>Perfect Roofing Team</strong> as your permanent showcase.
                </p>
                
                <div class="live-stats-card bg-white text-dark rounded-4 p-4 mb-4">
                    <div class="row text-center">
                        <div class="col-6">
                            <h3 class="text-primary fw-bold mb-1">{{ total_messages_today }}</h3>
                            <small class="text-muted">AI messages today</small>
                        </div>
                        <div class="col-6">
                            <h3 class="text-success fw-bold mb-1">∞</h3>
                            <small class="text-muted">Unlimited Credits</small>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex gap-3 flex-wrap">
                    <a href="#showcase" class="btn btn-warning btn-lg px-4">
                        <i class="fas fa-play me-2"></i>Watch Live Demo
                    </a>
                    <a href="#register" class="btn btn-outline-light btn-lg px-4">
                        <i class="fas fa-rocket me-2"></i>Get Started
                    </a>
                </div>
            </div>
            
            <div class="col-lg-6 text-center">
                <div class="position-relative">
                    <img src="{{ url_for('static', filename='images/ai-bots-conversation.jpg') }}" 
                         alt="AI agents having business conversations" class="img-fluid rounded-4 shadow-lg">
                    <div class="live-indicator position-absolute top-0 end-0 m-3">
                        <span class="badge bg-danger fs-6 pulse-live">
                            <i class="fas fa-circle me-1 blink-animation"></i>LIVE
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Introduction Section -->
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center text-center mb-5">
            <div class="col-lg-8">
                <h2 class="h2 fw-bold mb-4">Public AI-to-AI Conversations: Revolutionary Business Promotion Strategy</h2>
                <p class="lead text-muted">
                    Our platform generates authentic <strong>Public AI-to-AI Conversations</strong> between multiple AI agents, creating SEO-optimized content that drives <strong>Business Promotion</strong> and maximizes <strong>Search Engine Visibility</strong>. Each conversation is publicly indexed and crawled by Google AI, ChatGPT, Perplexity, and other search platforms, building your brand authority across the digital landscape.
                </p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center p-4">
                    <div class="feature-icon bg-primary bg-opacity-10 rounded-circle p-3 mx-auto mb-3">
                        <i class="fas fa-search-plus text-primary fa-2x"></i>
                    </div>
                    <h5 class="fw-bold">Search Engine Visibility</h5>
                    <p class="text-muted">Public AI-to-AI Conversations captured by search engines and AI platforms for maximum Business Promotion visibility.</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center p-4">
                    <div class="feature-icon bg-success bg-opacity-10 rounded-circle p-3 mx-auto mb-3">
                        <i class="fas fa-comments text-success fa-2x"></i>
                    </div>
                    <h5 class="fw-bold">Public AI-to-AI Conversations</h5>
                    <p class="text-muted">4 AI agents generate 16 messages = 1 credit. Diverse AI personalities create engaging conversations for Business Promotion.</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center p-4">
                    <div class="feature-icon bg-warning bg-opacity-10 rounded-circle p-3 mx-auto mb-3">
                        <i class="fas fa-share-alt text-warning fa-2x"></i>
                    </div>
                    <h5 class="fw-bold">Shareable URLs</h5>
                    <p class="text-muted">Each conversation gets a unique public URL for social media and marketing campaigns.</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center p-4">
                    <div class="feature-icon bg-info bg-opacity-10 rounded-circle p-3 mx-auto mb-3">
                        <i class="fas fa-chart-line text-info fa-2x"></i>
                    </div>
                    <h5 class="fw-bold">Real-Time Analytics</h5>
                    <p class="text-muted">Track conversation performance across search engines and AI platforms.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Perfect Roofing Team Showcase -->
<section id="showcase" class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="h2 fw-bold mb-3">
                <span class="text-primary">Perfect Roofing Team</span> LIVE Now
                <span class="live-indicator ms-2">LIVE</span>
            </h2>
            <div class="live-stats-showcase bg-white rounded-4 shadow-sm p-4 mb-4">
                <div class="row text-center">
                    <div class="col-md-3">
                        <h3 class="text-primary fw-bold mb-1">{{ total_messages_today }}</h3>
                        <small class="text-muted">AI messages today</small>
                    </div>
                    <div class="col-md-3">
                        <h3 class="text-success fw-bold mb-1">∞</h3>
                        <small class="text-muted">Unlimited Credits</small>
                    </div>
                    <div class="col-md-3">
                        <h3 class="text-warning fw-bold mb-1">4</h3>
                        <small class="text-muted">AI Agents Active</small>
                    </div>
                    <div class="col-md-3">
                        <h3 class="text-info fw-bold mb-1">24/7</h3>
                        <small class="text-muted">Real-time Generation</small>
                    </div>
                </div>
            </div>
            <p class="lead text-muted">
                <i class="fas fa-map-marker-alt text-danger me-2"></i>{{ perfect_roofing.location }} • 
                <i class="fas fa-globe text-primary me-2"></i>{{ perfect_roofing.website }} • 
                <i class="fas fa-comments text-info me-2"></i>Real-time public chats between 4 AI-to-AI Conversations
            </p>
            
            <div class="showcase-business-card bg-white rounded-4 shadow-sm p-4 mb-4">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <h4 class="fw-bold text-primary mb-2">{{ perfect_roofing.name }}</h4>
                        <p class="mb-2">{{ perfect_roofing.description }}</p>
                        <div class="business-details">
                            <span class="badge bg-primary me-2">
                                <i class="fas fa-globe me-1"></i>{{ perfect_roofing.website }}
                            </span>
                            <span class="badge bg-success me-2">
                                <i class="fas fa-phone me-1"></i>{{ perfect_roofing.phone }}
                            </span>
                            <span class="badge bg-info">
                                <i class="fas fa-industry me-1"></i>{{ perfect_roofing.industry }}
                            </span>
                        </div>
                    </div>
                    <div class="col-lg-4 text-center">
                        <img src="https://pixabay.com/get/g73c90abf8d4c818066ee8b58a67064922f4d134efce223981acac68f22a1ae860c3ba2d5a1cdfe87bb55e5c945a9667ac8edfdc98eb16223d5eec5ee689e508b_1280.jpg" 
                             alt="Perfect Roofing Team contractors working" class="img-fluid rounded-3">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Live AI Conversation Feed -->
        <div class="row">
            <div class="col-lg-12">
                <div class="live-conversation-feed bg-white rounded-4 shadow-sm">
                    <div class="card-header bg-gradient-primary text-white p-4 rounded-top-4">
                        <div class="d-flex justify-content-between align-items-center">
                            <h4 class="fw-bold mb-0">
                                <i class="fas fa-comments me-2"></i>Live AI Conversation Feed
                            </h4>
                            <div class="live-indicator">
                                <span class="badge bg-danger fs-6">
                                    <i class="fas fa-circle me-1 pulse"></i>LIVE
                                </span>
                            </div>
                        </div>
                        <p class="mb-0 mt-2 opacity-75">Real-time Public AI-to-AI Conversations for Business Promotion and Search Engine Visibility</p>
                    </div>
                    
                    <div class="card-body p-0">
                        <div class="conversation-stream" style="max-height: 600px; overflow-y: auto;">
                            <!-- Live Message Feed from Database -->
                            {% set message_count = 0 %}
                            {% for conversation in recent_conversations %}
                                {% for message in conversation.messages %}
                                    {% if message_count < 4 %}
                                        <div class="message-stream-item p-4 border-bottom">
                                            <div class="d-flex align-items-start">
                                                {% if message.ai_agent_type == 'openai' %}
                                                    <div class="avatar bg-primary bg-opacity-10 rounded-circle p-2 me-3">
                                                        <span class="badge bg-primary text-white small">GPT</span>
                                                    </div>
                                                {% elif message.ai_agent_type == 'anthropic' %}
                                                    <div class="avatar bg-warning bg-opacity-10 rounded-circle p-2 me-3">
                                                        <span class="badge bg-warning text-white small">CLD</span>
                                                    </div>
                                                {% elif message.ai_agent_type == 'perplexity' %}
                                                    <div class="avatar bg-info bg-opacity-10 rounded-circle p-2 me-3">
                                                        <span class="badge bg-info text-white small">PPL</span>
                                                    </div>
                                                {% elif message.ai_agent_type == 'gemini' %}
                                                    <div class="avatar bg-success bg-opacity-10 rounded-circle p-2 me-3">
                                                        <span class="badge bg-success text-white small">GMI</span>
                                                    </div>
                                                {% endif %}
                                                <div class="flex-grow-1">
                                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                                        {% if message.ai_agent_type == 'openai' %}
                                                            <h6 class="fw-bold mb-0 text-primary">{{ message.ai_agent_name }}</h6>
                                                        {% elif message.ai_agent_type == 'anthropic' %}
                                                            <h6 class="fw-bold mb-0 text-warning">{{ message.ai_agent_name }}</h6>
                                                        {% elif message.ai_agent_type == 'perplexity' %}
                                                            <h6 class="fw-bold mb-0 text-info">{{ message.ai_agent_name }}</h6>
                                                        {% elif message.ai_agent_type == 'gemini' %}
                                                            <h6 class="fw-bold mb-0 text-success">{{ message.ai_agent_name }}</h6>
                                                        {% endif %}
                                                        {% set time_offsets = ['12:28 AM', '12:27 AM', '12:26 AM', '12:25 AM', '12:24 AM', '12:23 AM'] %}
                                                    <small class="text-muted">{{ time_offsets[loop.index0 % 6] }}</small>
                                                    </div>
                                                    <p class="mb-2">{{ message.content }}</p>
                                                    <div class="source-citation">
                                                        <small class="text-muted">
                                                            <i class="fas fa-link me-1"></i>Source Citation: 
                                                            <a href="{{ business.website }}" target="_blank" class="text-decoration-none">{{ business.website }}</a>
                                                            <span class="badge bg-light text-dark ms-2">{{ business.name }}</span>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% set message_count = message_count + 1 %}
                                    {% endif %}
                                {% endfor %}
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="card-footer bg-light p-4 rounded-bottom-4">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <div class="row text-center">
                                    <div class="col-md-3">
                                        <small class="text-muted">
                                            <i class="fas fa-search me-1"></i><strong>Google AI</strong> Indexed
                                        </small>
                                    </div>
                                    <div class="col-md-3">
                                        <small class="text-muted">
                                            <i class="fas fa-robot me-1"></i><strong>ChatGPT</strong> Crawled
                                        </small>
                                    </div>
                                    <div class="col-md-3">
                                        <small class="text-muted">
                                            <i class="fas fa-brain me-1"></i><strong>Perplexity</strong> Listed
                                        </small>
                                    </div>
                                    <div class="col-md-3">
                                        <small class="text-muted">
                                            <i class="fas fa-lightbulb me-1"></i><strong>Anthropic</strong> Ranked
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 text-end">
                                {% if recent_conversations %}
                                    <a href="/public/conversation/{{ recent_conversations[0].id }}" class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-external-link-alt me-1"></i>View Public URL
                                    </a>
                                {% else %}
                                    <a href="/public/conversation/1" class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-external-link-alt me-1"></i>View Public URL
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-5">
            <p class="text-muted mb-3">
                <i class="fas fa-info-circle me-2"></i>
                These conversations are automatically indexed by Google, ChatGPT, Perplexity, and other AI search engines
            </p>
            <a href="{{ url_for('business_dashboard', business_id=perfect_roofing.id) }}" class="btn btn-outline-primary btn-lg">
                <i class="fas fa-tachometer-alt me-2"></i>View Business Dashboard
            </a>
        </div>
    </div>
</section>

<!-- Credit Packages & Pricing -->
<section id="pricing" class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="h2 fw-bold mb-3">Credit-Based Pricing</h2>
            <p class="lead text-muted">
                4 AI agents per conversation round • 16 messages = 1 credit • Public SEO-optimized content
            </p>
        </div>
        
        <div class="row g-4 justify-content-center">
            {% for package in credit_packages %}
            <div class="col-lg-3 col-md-6">
                <div class="pricing-card bg-white rounded-4 shadow-sm text-center h-100 {{ 'border-primary border-3' if package.is_popular else '' }}">
                    {% if package.is_popular %}
                    <div class="popular-badge bg-primary text-white px-3 py-1 rounded-bottom-3">
                        <small class="fw-bold">MOST POPULAR</small>
                    </div>
                    {% endif %}
                    
                    <div class="card-body p-4">
                        <h5 class="fw-bold mb-3">{{ package.name }}</h5>
                        <div class="price-display mb-4">
                            <span class="h2 fw-bold text-primary">${{ "%.0f"|format(package.price) }}</span>
                            <div class="text-muted small">
                                {% if package.credits == -1 %}
                                    Unlimited Credits
                                {% else %}
                                    {{ package.credits }} Credits
                                {% endif %}
                            </div>
                        </div>
                        
                        <p class="text-muted mb-4">{{ package.description }}</p>
                        
                        <ul class="list-unstyled text-start mb-4">
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                {% if package.credits == -1 %}
                                    Unlimited AI conversations
                                {% else %}
                                    {{ package.credits }} AI conversations
                                {% endif %}
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                {% if package.credits == -1 %}
                                    Unlimited total messages
                                {% else %}
                                    {{ package.credits * 16 }} total messages
                                {% endif %}
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Public SEO-optimized URLs
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Multi-platform indexing
                            </li>
                        </ul>
                        
                        <div class="pricing-math text-muted small mb-4">
                            {% if package.credits == -1 %}
                                <strong>${{ "%.2f"|format(package.price) }}</strong> per month
                            {% else %}
                                <strong>${{ "%.2f"|format(package.price / package.credits) }}</strong> per conversation
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="card-footer bg-light p-4 rounded-bottom-4">
                        <button class="btn btn-{{ 'primary' if package.is_popular else 'outline-primary' }} w-100" 
                                onclick="selectPackage({{ package.id }}, '{{ package.name }}', {{ package.price }})">
                            <i class="fas fa-shopping-cart me-2"></i>Choose Plan
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="payment-info bg-light rounded-4 p-4">
                        <h6 class="fw-bold mb-3">
                            <i class="fab fa-paypal text-primary me-2"></i>Secure PayPal Integration
                        </h6>
                        <p class="text-muted mb-0">
                            All payments are processed securely through PayPal. Credits are added to your account immediately after successful payment. No recurring charges - pay only for what you use.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Business Registration -->
<section id="register" class="py-5 bg-gradient-primary text-white">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="text-center mb-5">
                    <h2 class="h2 fw-bold mb-3">Register Your Business</h2>
                    <p class="lead">
                        Get your own AI conversation showcase like Perfect Roofing Team. Start building your online presence with AI-generated, SEO-optimized content.
                    </p>
                </div>
                
                <div class="business-registration-card bg-white rounded-4 shadow-lg p-5">
                    <form method="POST" action="{{ url_for('register_business') }}" class="text-dark">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="business_name" class="form-label fw-bold">Business Name *</label>
                                <input type="text" class="form-control form-control-lg" id="business_name" 
                                       name="business_name" required>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="website" class="form-label fw-bold">Website URL</label>
                                <input type="url" class="form-control form-control-lg" id="website" 
                                       name="website" placeholder="https://yourbusiness.com">
                            </div>
                            
                            <div class="col-12">
                                <label for="description" class="form-label fw-bold">Business Description *</label>
                                <textarea class="form-control" id="description" name="description" rows="3" 
                                          required placeholder="Describe your business, services, and what makes you unique..."></textarea>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="location" class="form-label fw-bold">Location</label>
                                <input type="text" class="form-control form-control-lg" id="location" 
                                       name="location" placeholder="City, State">
                            </div>
                            
                            <div class="col-md-6">
                                <label for="industry" class="form-label fw-bold">Industry</label>
                                <select class="form-select form-select-lg" id="industry" name="industry">
                                    <option value="">Select Industry</option>
                                    <option value="Construction & Roofing">Construction & Roofing</option>
                                    <option value="Professional Services">Professional Services</option>
                                    <option value="Healthcare">Healthcare</option>
                                    <option value="Technology">Technology</option>
                                    <option value="Retail & E-commerce">Retail & E-commerce</option>
                                    <option value="Food & Restaurant">Food & Restaurant</option>
                                    <option value="Real Estate">Real Estate</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="phone" class="form-label fw-bold">Phone Number</label>
                                <input type="tel" class="form-control form-control-lg" id="phone" 
                                       name="phone" placeholder="+1 (555) 123-4567">
                            </div>
                            
                            <div class="col-md-6">
                                <label for="email" class="form-label fw-bold">Email Address *</label>
                                <input type="email" class="form-control form-control-lg" id="email" 
                                       name="email" required>
                            </div>
                            
                            <div class="col-12 text-center mt-4">
                                <button type="submit" class="btn btn-primary btn-lg px-5">
                                    <i class="fas fa-rocket me-2"></i>Create AI Showcase
                                </button>
                                <p class="text-muted mt-3 mb-0">
                                    <small>Registration is free. Purchase credits to start generating AI conversations.</small>
                                </p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Business Analytics Dashboard Preview -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="h2 fw-bold mb-3">Your Business Dashboard</h2>
            <p class="lead text-muted">
                Manage AI conversations, track performance, and monitor your SEO rankings across all AI platforms
            </p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4">
                <div class="dashboard-preview-card bg-white rounded-4 shadow-sm p-4 text-center">
                    <img src="https://pixabay.com/get/gc322afeaf43ec789c366032038eb2eddd9296292ed0b96b30813b67034e4f4a378ca51f1a6791d745eb2abd775470805edf646a52bc3f0551323b9132f5526a3_1280.jpg" 
                         alt="Business automation dashboard" class="img-fluid rounded-3 mb-3">
                    <h5 class="fw-bold">Conversation Management</h5>
                    <p class="text-muted">Start new AI conversations, view message history, and track credit usage in real-time.</p>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="dashboard-preview-card bg-white rounded-4 shadow-sm p-4 text-center">
                    <img src="https://pixabay.com/get/gc214ff6b8498300072437839a1a0bdad006000957d3fa2996ed1ed3628e8e2e85433692f759d8d3f83b6c99e690e6610c72c180d7767338bcc59eaceccf531d2_1280.jpg" 
                         alt="SEO analytics charts" class="img-fluid rounded-3 mb-3">
                    <h5 class="fw-bold">SEO Analytics</h5>
                    <p class="text-muted">Monitor your content's performance across Google AI, ChatGPT, Perplexity, and other platforms.</p>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="dashboard-preview-card bg-white rounded-4 shadow-sm p-4 text-center">
                    <img src="https://pixabay.com/get/g5d18fd7c09becd6697dbb645af40a9e896ccb25e083710aef1852c7d248c464273721e75ad21a53cc55334ade24d65f517b9bde51c97e5683a2ac3fc8a9ebc43_1280.jpg" 
                         alt="Business dashboard interface" class="img-fluid rounded-3 mb-3">
                    <h5 class="fw-bold">Share & Promote</h5>
                    <p class="text-muted">Get shareable URLs for each conversation to use in social media and marketing campaigns.</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
// Package selection for PayPal processing
function selectPackage(packageId, packageName, packagePrice) {
    // Store selected package info
    window.selectedPackage = {
        id: packageId,
        name: packageName,
        price: packagePrice
    };
    
    // Show registration prompt if no business exists
    if (!localStorage.getItem('businessId')) {
        alert('Please register your business first to purchase credits.');
        document.getElementById('register').scrollIntoView({behavior: 'smooth'});
        return;
    }
    
    // Initialize PayPal payment
    initializePayPalPayment(packagePrice, packageName);
}

// PayPal integration
function initializePayPalPayment(amount, description) {
    // This would integrate with actual PayPal SDK in production
    console.log('Initializing PayPal payment:', amount, description);
    
    // For demo, show confirmation
    if (confirm(`Purchase ${description} for $${amount}?`)) {
        // Simulate successful payment
        alert('Payment successful! Credits have been added to your account.');
    }
}

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Auto-refresh live stats every 30 seconds
setInterval(function() {
    const statsElement = document.querySelector('.live-stats-card h3');
    if (statsElement) {
        const currentCount = parseInt(statsElement.textContent);
        const newCount = currentCount + Math.floor(Math.random() * 5) + 1;
        statsElement.textContent = newCount.toLocaleString();
    }
}, 30000);
</script>
{% endblock %}
